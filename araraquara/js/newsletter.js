$((function(){$(".abre_news").on("click",(function(){$(".fundo_news").fadeIn("slow")})),$(".fecha_news").on("click",(function(){$(".fundo_news").fadeOut("slow")}));var e=$(".newsletter");shopping_token;function n(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}$((function(){e.find(".step2").hide(),e.find(".step1 :submit").on("click",(function(t){t.stopPropagation(),t.preventDefault(),e.find("[name=newsletter_nome]").val()&&e.find("[name=newsletter_email]").val()&&e.find("[name=newsletter_nascimento]").val()&&e.find("[name=newsletter_cpf]").val()?n(e.find("[name=newsletter_email]").val())?valida_cpf(e.find("[name=newsletter_cpf]").val())?(getCaptcha(),e.find(".imagemCaptchaVerify").click((function(e){getCaptcha()})),$(".txtCaptcha").keydown((function(e){if(13==e.keyCode)return e.preventDefault(),$(".cadas").click(),!1})),e.find(".step1").fadeOut().queue((function(n){alert(""),e.find(".step2").fadeIn()}))):alert("Preencha um CPF v치lido"):alert("Preencha um e-mail v치lido"):alert("Preencha todos os campos")})),e.on("click",".step2 :submit",(function(t){t.preventDefault();var a=grecaptcha.getResponse(undefined);return e.find("[name=newsletter_email]").val()?n(e.find("[name=newsletter_email]").val())?valida_cpf(e.find("[name=newsletter_cpf]").val())?e.find("[name=newsletter_politica]").prop("checked")?a?void $.post(apis.newsletter+"?api_token="+shopping_token,{token:shopping_token,shopping_id:shopping_id,nome:e.find("[name=newsletter_nome]").val(),email:e.find("[name=newsletter_email]").val(),nascimento:e.find("[name=newsletter_nascimento]").val(),cpf:e.find("[name=newsletter_cpf]").val()},(function(e){switch(e.status){case"done":$(".step2").fadeOut(),alert("Cadastro efetuado com sucesso");break}})):(alert("Preencha o reCaptcha"),!1):(alert("Concorde com os Termos de Uso"),!1):(alert("Preencha um CPF v치lido"),!1):(alert("Preencha um e-mail v치lido"),!1):(alert("Preencha todos os campos"),!1)}))}))}));